// -------------------------------
    // RENDER LIST
    // -------------------------------
    function renderQuotes() {
        const filtered = filterQuotes();
        const list = document.getElementById('quotesList');
        const resultCount = document.getElementById('resultCount');

        resultCount.textContent = `${filtered.length} result${filtered.length !== 1 ? 's' : ''}`;
        list.innerHTML = '';

        const perPage = 50;
        const startIdx = currentPage * perPage;
        const endIdx = startIdx + perPage;
        const display = filtered.slice(startIdx, endIdx);

        // Update pagination controls
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const pageInfo = document.getElementById('pageInfo');

        prevBtn.disabled = currentPage === 0;
        nextBtn.disabled = endIdx >= filtered.length;

        const totalPages = Math.ceil(filtered.length / perPage);
        pageInfo.textContent = `Page ${currentPage + 1} of ${totalPages}`;

        if (!display.length) {
            list.innerHTML = '<p class="text-center text-purple-600">No quotes found. Try a different search term!</p>';
            document.getElementById('pagination').style.display = 'none';
            return;
        }

        document.getElementById('pagination').style.display = 'flex';

        display.forEach((q, index) => {
            // Check for missing quotes before this one
            if (index > 0) {
                const prevId = parseInt(display[index - 1].id);
                const currId = parseInt(q.id);
                
                if (currId - prevId > 1) {
                    const missingDiv = document.createElement('div');
                    missingDiv.className = 'bg-purple-50/50 p-3 rounded-lg border border-dashed border-purple-300 text-center';
                    
                    const missingCount = currId - prevId - 1;
                    const missingNumbers = [];
                    for (let i = prevId + 1; i < currId; i++) {
                        missingNumbers.push(i);
                    }
                    
                    missingDiv.innerHTML = `
                        <p class="text-purple-500 text-sm italic">
                            Missing quote${missingCount > 1 ? 's' : ''}: #${missingNumbers.join(', #')}
                        </p>
                    `;
                    list.appendChild(missingDiv);
                }
            }

            const div = document.createElement('div');
            div.className = 'bg-purple-50 hover:bg-purple-100 p-4 rounded-lg border border-purple-200 transition-colors';

            const safe = q.text.replace(/'/g, "\\'");
            const formatted = formatDate(q.date);

            div.innerHTML = `
                <p class="text-purple-900 mb-2">
                    <span class="text-purple-600 font-semibold">#${q.id}:</span>
                    "${q.text}"
                </p>
                <p class="text-sm text-purple-700 mb-2">${q.game} • ${formatted}</p>

                <button
                    class="px-3 py-1 bg-purple-200 hover:bg-purple-300 text-purple-900 rounded-full text-xs transition-colors"
                    onclick="copyQuote('${safe}')">
                    Copy Quote
                </button>
            `;
            list.appendChild(div);
        });
    }


    // -------------------------------
    // SEARCH LISTENER
    // -------------------------------
    document.getElementById('searchInput').addEventListener('input', e => {
        currentSearch = e.target.value;
        renderQuotes();
    });


    // -------------------------------
    // RANDOM QUOTE
    // -------------------------------
    document.getElementById('randomBtn').addEventListener('click', () => {
        const r = quotes[Math.floor(Math.random() * quotes.length)];
        document.getElementById('randomQuoteText').textContent = `#${r.id}: "${r.text}"`;
        document.getElementById('randomQuoteInfo').textContent = `${r.game} • ${formatDate(r.date)}`;
        document.getElementById('randomQuoteDisplay').classList.remove('hidden');
    });


    // -------------------------------
    // QUOTE OF THE DAY
    // -------------------------------
    function getQuoteOfTheDay() {
        const now = new Date();
        const start = new Date(now.getFullYear(), 0, 0);
        const diff = now - start;
        const oneDay = 86400000;
        const day = Math.floor(diff / oneDay);
        const seed = now.getFullYear() * 1000 + day;
        return quotes[seed % quotes.length];
    }

    const qod = getQuoteOfTheDay();
    document.getElementById('quoteOfDayText').textContent = `#${qod.id}: "${qod.text}"`;
    document.getElementById('quoteOfDayInfo').textContent = `${qod.game} • ${formatDate(qod.date)}`;


    // -------------------------------
    // CLIPBOARD
    // -------------------------------
    window.copyQuote = function(text) {
        navigator.clipboard.writeText(text);
    };


    // INITIAL RENDER
    renderQuotes();
}
</script>

</body>
</html>
