<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic 8-Ball</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            font-family: 'Arial', sans-serif;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 20px 0;
        }

        h1 {
            color: white;
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .instruction {
            color: rgba(255,255,255,0.9);
            font-size: 1.2em;
            margin-bottom: 40px;
            text-align: center;
        }

        .ball-container {
            perspective: 1000px;
            cursor: pointer;
        }

        .ball {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle at 100px 100px, #2d2d2d, #000000);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                inset -20px -20px 50px rgba(0,0,0,0.8),
                inset 20px 20px 50px rgba(255,255,255,0.1),
                0 20px 50px rgba(0,0,0,0.5);
            transition: transform 0.1s ease;
            position: relative;
        }

        .ball.shaking {
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: rotate(0deg) translateX(0); }
            10% { transform: rotate(-10deg) translateX(-10px); }
            20% { transform: rotate(10deg) translateX(10px); }
            30% { transform: rotate(-10deg) translateX(-10px); }
            40% { transform: rotate(10deg) translateX(10px); }
            50% { transform: rotate(-10deg) translateX(-10px); }
            60% { transform: rotate(10deg) translateX(10px); }
            70% { transform: rotate(-10deg) translateX(-10px); }
            80% { transform: rotate(10deg) translateX(10px); }
            90% { transform: rotate(-5deg) translateX(-5px); }
        }

        .window {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                inset 0 0 20px rgba(0,0,0,0.5),
                0 0 20px rgba(59, 130, 246, 0.3);
            position: relative;
            overflow: hidden;
        }

        .answer {
            color: white;
            font-size: 0.9em;
            text-align: center;
            padding: 15px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .answer.visible {
            opacity: 1;
        }

        .quote-panel {
            margin-top: 40px;
            margin-bottom: 40px;
            background: linear-gradient(135deg, #e9d5ff 0%, #ddd6fe 100%);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            max-width: 600px;
            width: fit-content;
            max-width: 90%;
            display: none;
            border: 2px solid #c4b5fd;
        }

        .quote-panel.visible {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .quote-text {
            font-size: 1.1em;
            font-style: italic;
            color: #4c1d95;
            line-height: 1.6;
            text-align: center;
        }

        .quote-label {
            font-size: 0.9em;
            color: #6d28d9;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .number-8 {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 4em;
            font-weight: bold;
            color: white;
            text-shadow: 
                2px 2px 4px rgba(0,0,0,0.5),
                0 0 10px rgba(255,255,255,0.3);
        }
        .screenshot-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            max-width: 500px;
        }
        
        .screenshot-card h2 {
            color: white;
            margin: 0 0 20px 0;
            text-align: center;
        }
        
        .screenshot-card .question-display {
            color: white;
            font-size: 1.2em;
            font-style: italic;
            margin-bottom: 30px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>ðŸ”® Magic 8-Ball ðŸ”®</h1>
    <p class="instruction">Ask a yes/no question!</p>
    
    <div style="margin-bottom: 30px; text-align: center;">
        <input type="text" id="question" placeholder="Enter your question..." style="
            width: 400px;
            max-width: 90vw;
            padding: 15px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            margin-bottom: 15px;
        ">
        <br>
        <button onclick="askQuestion()" style="
            padding: 15px 40px;
            font-size: 1.2em;
            font-weight: bold;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.1s ease;
        " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
            Ask the 8-Ball
        </button>
        <button id="screenshotBtn" onclick="takeScreenshot()" style="
            padding: 15px 40px;
            font-size: 1.2em;
            font-weight: bold;
            background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.1s ease;
            margin-left: 10px;
            display: none;
        " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
            ðŸ“¸ Take Screenshot
        </button>
    </div>
    
    <div id="displayQuestion" style="
        color: white;
        font-size: 1.3em;
        font-style: italic;
        margin-bottom: 30px;
        text-align: center;
        min-height: 30px;
        text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
    "></div>
    
    <div class="ball-container" onclick="shakeBall()">
        <div class="ball" id="ball">
            <div class="number-8">8</div>
            <div class="window">
                <div class="answer" id="answer"></div>
            </div>
        </div>
    </div>

    <div class="quote-panel" id="quotePanel">
        <div class="quote-label">From The Book of Carp:</div>
        <div class="quote-text" id="quoteText"></div>
    </div>

    <script>
        let carpQuotes = [];

        // Fetch quotes from thebookofcarp.txt
        async function loadQuotes() {
            try {
                const response = await fetch('thebookofcarp.txt');
                const text = await response.text();
                carpQuotes = text.split('\n').filter(line => line.trim() !== '');
            } catch (error) {
                console.error('Error loading quotes:', error);
                carpQuotes = ['The Book of Carp could not be loaded.'];
            }
        }

        // Load quotes when page loads
        loadQuotes();

        const answers = [
            "It is certain",
            "It is decidedly so",
            "Oh, that's definitely a yes",
            "Definitely, but only if you say please",
            "Yes. Yes indeed. Quite.",
            "Yeah I guess",
            "FUCK YEAH",
            "Of course",
            "Yuuuup",
            "Totally",
            "I suppose",
            "Heh, yeah",
            "Abso-fuckin-lutely",
            "Yupperino",
            "It's obviously yes",
            "That's gonna be a big thumbs up from me bud",
            "Sure why not",
            "Yaaaaaasssss queen",
            "SeemsGood",
            "Haha, oh yeah",
            "Without a doubt",
            "Yes definitely",
            "You may rely on it",
            "Fo sho, yo",
            "10-4",
            "Oooooh yeah",
            "As I see it, yes",
            "Positively and absolutely",
            "Most likely",
            "Outlook good",
            "I wasn't really listening, but yes",
            "Yes",
            "Signs point to yes",
            "Reply hazy try again",
            "The real answer is the friends we made along the way",
            "$readrandline(C:\\Users\\Public\\Desktop\\twitchgames\\trollbox.txt)",
            "Ask again later",
            "Wouldn't you like to know",
            "What is that supposed to mean",
            "Sandstorm by Darude",
            "S",
            "Ban Juicy",
            "Ask Ellie",
            "Depends on who's asking",
            "TBD",
            "Better not tell you now",
            "Eh",
            "CORN",
            "That's a good question",
            "OpieOP",
            "Cannot predict now",
            "Lmao",
            "8==D",
            "No...I mean yes...Well...Ask again later.",
            "Ask again when the moon is full",
            "Does a bear shit in the woods?",
            "Concentrate and ask again",
            "Don't count on it",
            "My reply is no",
            "No, $username, mayonnaise is not an instrument",
            "My sources say no",
            "No frickin way",
            "NOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!",
            "Outlook not so good",
            "Very doubtful",
            "Not a snowball's chance in hell",
            "Not gonna happen buddy",
            "Negative",
            "Absolutely not, why would you even consider that",
            "VoteNay",
            "What? BabyRage No.",
            "Case is not compelling",
            "wtf no lol",
            "Of course not, are you insane?",
            "Hahaha. No.",
            "Mayhaps",
            "That's a thumbs down",
            "Well since you asked so nicely, no",
            "Fat chance",
            "Your guess is as good as mine",
            "NAYETH",
            "Never in a million, billion, trillion years",
            "Nah",
            "Naaaah man",
            "Signs point to no",
            "The odds are not in your favor",
            "No, and don't ask me again"
        ];

        function shakeBall() {
            const ball = document.getElementById('ball');
            const answerEl = document.getElementById('answer');
            const quotePanel = document.getElementById('quotePanel');
            const quoteText = document.getElementById('quoteText');
            const displayQuestion = document.getElementById('displayQuestion');
            
            // Only proceed if there's a question displayed
            if (!displayQuestion.textContent.trim()) {
                return; // Don't shake if no question was asked
            }
            
            // Hide current answer and quote
            answerEl.classList.remove('visible');
            quotePanel.classList.remove('visible');
            
            // Add shaking animation
            ball.classList.add('shaking');
            
            // Remove animation class after it completes
            setTimeout(() => {
                ball.classList.remove('shaking');
                
                // Show random answer
                const randomAnswer = answers[Math.floor(Math.random() * answers.length)];
                answerEl.textContent = randomAnswer;
                answerEl.classList.add('visible');

                // Show random quote from Book of Carp
                if (carpQuotes.length > 0) {
                    let randomQuote = carpQuotes[Math.floor(Math.random() * carpQuotes.length)];
                    
                    // Extract text between first and last quotation marks
                    const firstQuote = randomQuote.indexOf('"');
                    const lastQuote = randomQuote.lastIndexOf('"');
                    
                    if (firstQuote !== -1 && lastQuote !== -1 && firstQuote !== lastQuote) {
                        randomQuote = randomQuote.substring(firstQuote + 1, lastQuote);
                    }
                    
                    quoteText.textContent = randomQuote;
                    quotePanel.classList.add('visible');
                    document.getElementById('screenshotBtn').style.display = 'inline-block';
                }
            }, 500);
        }

        function askQuestion() {
            const questionInput = document.getElementById('question');
            const displayQuestion = document.getElementById('displayQuestion');
            
            // Only shake if there's a question
            if (questionInput.value.trim()) {
                // Display the question
                displayQuestion.textContent = '"' + questionInput.value + '"';
                
                shakeBall();
                questionInput.value = ''; // Clear the question box
            }
        }

        async function takeScreenshot() {
            const displayQuestion = document.getElementById('displayQuestion');
            const answerEl = document.getElementById('answer');
            const quoteText = document.getElementById('quoteText');
            
            if (!displayQuestion.textContent.trim()) {
                alert('Please ask a question first!');
                return;
            }
            
            // Create a temporary container for the screenshot
            const card = document.createElement('div');
            card.className = 'screenshot-card';
            card.style.position = 'fixed';
            card.style.left = '-9999px';
            card.innerHTML = `
                <h2>ðŸ”® Magic 8-Ball ðŸ”®</h2>
                <div class="question-display">${displayQuestion.textContent}</div>
                <div style="display: flex; justify-content: center; margin-bottom: 30px;">
                    <div style="
                        width: 200px;
                        height: 200px;
                        border-radius: 50%;
                        background: radial-gradient(circle at 66px 66px, #2d2d2d, #000000);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        box-shadow: 
                            inset -20px -20px 50px rgba(0,0,0,0.8),
                            inset 20px 20px 50px rgba(255,255,255,0.1),
                            0 20px 50px rgba(0,0,0,0.5);
                        position: relative;
                    ">
                        <div style="
                            position: absolute;
                            top: 20px;
                            left: 50%;
                            transform: translateX(-50%);
                            font-size: 2.5em;
                            font-weight: bold;
                            color: white;
                            text-shadow: 
                                2px 2px 4px rgba(0,0,0,0.5),
                                0 0 10px rgba(255,255,255,0.3);
                        ">8</div>
                        <div style="
                            width: 80px;
                            height: 80px;
                            border-radius: 50%;
                            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            box-shadow: 
                                inset 0 0 20px rgba(0,0,0,0.5),
                                0 0 20px rgba(59, 130, 246, 0.3);
                            overflow: hidden;
                        ">
                            <div style="
                                color: white;
                                font-size: 0.7em;
                                text-align: center;
                                padding: 10px;
                                font-weight: bold;
                                text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
                            ">${answerEl.textContent}</div>
                        </div>
                    </div>
                </div>
                <div class="quote-panel visible" style="margin: 0;">
                    <div class="quote-label">From The Book of Carp:</div>
                    <div class="quote-text">${quoteText.textContent}</div>
                </div>
            `;
            
            document.body.appendChild(card);
            
            // Use html2canvas library
            const script = document.createElement('script');
            script.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';
            script.onload = async () => {
                const canvas = await html2canvas(card, {
                    backgroundColor: null,
                    scale: 2
                });
                
                // Convert to blob and download
                canvas.toBlob((blob) => {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'magic-8-ball-prediction.png';
                    a.click();
                    URL.revokeObjectURL(url);
                });
                
                document.body.removeChild(card);
            };
            document.head.appendChild(script);
        }

        // Allow pressing Enter to ask question
        document.getElementById('question').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                askQuestion();
            }
        });
    </script>
</body>
</html>
